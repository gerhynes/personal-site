---
title: "Add Authentication to a Next.js App with Auth0"
date: "2021-08-17"
slug: add-auth-to-a-next-app-with-auth0
description: "Add auth to a Next.js app."
published: false
tags: ["Next.js", "Authentication"]
image: ./placeholder.png
---

### Set Up a Next.js project

To create a new Next.js project run the command `npx create-next-app YOUR_APP_NAME` and give your app whatever name you want.

### Configure Auth0

Create a free account with Auth0. You'll be prompted to create a tenant.

Click on Create Application.

Give it whatever name you want for your app.

Select **Regular Web Application** and click **Create**.

It will ask you what technology you are working with.

Go to **Settings**.

Under Basic Information, you will see some fields that you will need:

- Domain
- Client ID
- Client Secret

Scroll down and

In the **Allowed Callback URLs** field, add `http://localhost:3000/api/auth/callback`.

In the **Allowed Logout URLs** field, add `http://localhost:3000`.

### Set up the Auth0 SDK

In the root of your project, run the command `npm install @auth0/nextjs-auth0` to install the Auth0 Next.js SDK.

Still in the root of your project, create a `.env.local` file with the following keys:

```
AUTH0_SECRET='use [openssl rand -hex 32] to generate a 32 bytes value'
AUTH0_BASE_URL='http://localhost:3000'
AUTH0_ISSUER_BASE_URL='https://YOUR_DOMAIN'
AUTH0_CLIENT_ID='YOUR_CLIENT_ID'
AUTH0_CLIENT_SECRET='YOUR_CLIENT_SECRET'
```

To generate your AUTH0_SECRET, run `openssl rand -hex 32` in your terminal. This produces a random 32 byte value.

AUTH0_ISSUER_BASE_URL is `https://` plus the **Domain** from your Auth0 application settings.

AUTH0_CLIENT_ID is the Client ID from your Auth0 application settings.

AUTH0_CLIENT_SECRET is the Client Secret from your Auth0 application settings.

Inside the `pages/api` directory, create an `auth` directory and inside that create a `[...auth0].js` file.

In this file, import the `handleAuth` method from the SDK, call it and export the result.

```js
import { handleAuth } from "@auth0/nextjs-auth0";

export default handleAuth();
```

This will create a number of routes in your Next.js app:

- `/api/auth/login`: The route used to perform login with Auth0.
- `/api/auth/logout`: The route used to log the user out.
- `/api/auth/callback`: The route Auth0 will redirect the user to after a successful login.
- `/api/auth/me`: The route to fetch the user profile from.

### Add login and logout

### Show user information

### Further Resources

- [Auth0's Next.js Quickstart](https://auth0.com/docs/quickstart/webapp/nextjs)
